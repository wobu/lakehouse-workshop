<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title></title>
    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="css/slides-extended.css" />
    <link rel="stylesheet" href="dist\theme\solarized.css" id="theme" />
    <link rel="stylesheet" href="plugin\highlight\dracula.css" />
    <link rel="stylesheet" href="plugin/customcontrols/style.css">
    <link rel="stylesheet" href="plugin/chalkboard/style.css">

    <link rel="stylesheet" href="plugin/reveal-pointer/pointer.css" />


    <script defer src="dist/fontawesome/all.min.js"></script>
    <script defer src="plugin/load-mathjax.js"></script>

    <script type="text/javascript">
        function pageInIframe() {
            return (window.location !== window.parent.location);
        }

        let forgetPop = true;
        function onPopState(event) {
            if(forgetPop){
                forgetPop = false;
            } else if( pageInIframe()) {
                parent.postMessage(event.target.location.href, "app://obsidian.md");
            }
        }
        window.onpopstate = onPopState;
        window.onmessage = event => {
            if(event.data == "reload"){
                window.document.location.reload();
            }
            forgetPop = true;
        }

        function fitElements() {
            const itemsToFit = document.getElementsByClassName('fitText');
            for (const item in itemsToFit) {
                if (Object.hasOwnProperty.call(itemsToFit, item)) {
                    const element = itemsToFit[item];
                    fitElement(element, 1, 1000);
                    element.classList.remove('fitText');
                }
            }
        }

        function fitElement(element, start, end) {

            let size = (end + start) / 2;
            element.style.fontSize = `${size}px`;

            if (Math.abs(start - end) < 1) {
                while (element.scrollHeight > element.offsetHeight) {
                    size--;
                    element.style.fontSize = `${size}px`;
                }
                return;
            }

            if (element.scrollHeight > element.offsetHeight) {
                fitElement(element, start, size);
            } else {
                fitElement(element, size, end);
            }
        }

        document.onreadystatechange = () => {
            fitElements();
            if (document.readyState === 'complete') {
                if (pageInIframe() && window.location.href.indexOf("?export") != -1){
                    parent.postMessage(event.target.location.href, "app://obsidian.md");
                }
                if (window.location.href.indexOf("print-pdf") != -1){
                    let stateCheck = setInterval(() => {
                        clearInterval(stateCheck);
                        window.print();
                    }, 250);
                }
            }
        };
    </script>
</head>

<body>
    <div class="reveal">
        <div class="slides"><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

# Lakehouse & OTFs
Wolfgang Buchner  
TIKI GmbH

Material und PrÃ¤sentation:  
https://wobu.github.io/lakehouse-workshop/

[PDF Export](./?print-pdf)<sup id="fnref:1" role="doc-noteref">1</sup>




<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

<div class="block">

</div>



</div>
<div class="footnotes" role="doc-endnotes">
<ol>
<li id="fn:1" role="doc-endnote" class="footnote"><p>

Chrome oder Edge Browser

</p></li></ol>
</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

# Lakehouse 

`= Data Lake + Data Warehouse`

<img src="Lakehouse/Workshops/attachments/1_A6PpTrehGLxCJWNcUsDTNg.webp" alt="" style="object-fit: scale-down">





<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

<div class="block">

</div>



</div>
<div class="footnotes" role="doc-endnotes">
<ol>
<li id="fn:1" role="doc-endnote" class="footnote"><p>

https://davidregalado255.medium.com/wtf-is-a-data-lakehouse-ba14bf66f93b

</p></li></ol>
</div>
</div></script></section><section ><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Historie - Timeline


<style>
	.mermaid svg{
		max-width: unset !important
	}
</style>


<div class="mermaid">
gitGraph
    commit id:"Data Warehouse"
    branch BigData
    commit id:"Hadoop & MapReduce" tag: "2000s" tag:"New ML Hype"
    commit id:"MapReduce"
    commit id:"DataLakes (S3)" tag:"2010s"tag:"Compute w/o Storage"
    commit id:"Columnar Storage"
    checkout BI
    commit id:"Cloud Data Warehouse" tag:"ELT"
    checkout BigData
    commit id:"Distributed SQL Engines" tag:"ELT"
    commit id:"Open Table Formats" tag: "2020s"
    checkout BI
    merge BigData tag:"Lakehouse"
    commit id: "LLMs"
    commit id: "MCP" tag: "Agentic AI"


</div>




<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >


</div>
</div>

<aside class="notes"><p>HDFS vs S3: basic ACID broke</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Historie - Hive


> Facebook in its initial years started with Oracle as backend database to store all the data. But as time passed, data collected by them per day started to grow exponentially. ... To manage this large amount of data, Facebook started using Hadoop. Initially ... in 2006, the data was coming at the rate of 10s of GBs/day. In 2007 volume increased to 1 TB/day and after few years this volume reached to ~15 TB/day ... they realized the need of some tool which could act as a bridge between HDFS and their SQL experts so that their people having SQL expertise could move to new system with minimal changes.

\- Facebook - Warum Apache Hive entstanden ist<sup id="fnref:1" role="doc-noteref">1</sup>





<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

<div class="block">

</div>



</div>
<div class="footnotes" role="doc-endnotes">
<ol>
<li id="fn:1" role="doc-endnote" class="footnote"><p>

https://www.linkedin.com/pulse/hive-story-history-architecture-dinesh-gangwar/

</p></li></ol>
</div>
</div>

<aside class="notes"><p>Contras: Optimization (Partitioning is hard), no ACID, HiveQL, no Updates / Deletes</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Zeilen vs Spaltenorientierte Datenhaltung

<img src="Lakehouse/Workshops/attachments/Row_vs_Column_Comparison.png" alt="" style="object-fit: scale-down">


<img src="Lakehouse/Workshops/attachments/Row_vs_Column_Example.png" alt="" style="object-fit: scale-down">







<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

<div class="block">

</div>



</div>
<div class="footnotes" role="doc-endnotes">
<ol>
<li id="fn:1" role="doc-endnote" class="footnote"><p>

https://www.fivetran.com/learn/columnar-database-vs-row-database

</p></li><li id="fn:2" role="doc-endnote" class="footnote"><p>

https://sympathetic.ink/2024/01/24/Chapter-1-The-birth-of-Parquet.html

</p></li></ol>
</div>
</div></script></section></section><section ><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Entwicklung

<img src="Lakehouse/Workshops/attachments/Evolution_of_data_platforms.png" alt="" style="object-fit: scale-down">






<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

<div class="block">

</div>



</div>
<div class="footnotes" role="doc-endnotes">
<ol>
<li id="fn:1" role="doc-endnote" class="footnote"><p>

Matei Zaharia, Ali Ghodsi 0002, Reynold Xin, and Michael Armbrust. 2021. Lakehouse: A New Generation of Open Platforms that Unify Data Warehousing and Advanced Analytics. In 11th Conference on Innovative Data Systems Research, CIDR 2021, Virtual Event, January 11-15, 2021, Online Proceedings, www.cidrdb.org. Retrieved from http://cidrdb.org/cidr2021/papers/cidr2021_paper17.pdf

</p></li></ol>
</div>
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

##### Lakehouse vs Data Warehouse

<split even>

<img src="Lakehouse/Workshops/attachments/Generic_Overview_RDBMS_OLAP.png" alt="" style="object-fit: scale-down">


<img src="Lakehouse/Workshops/attachments/Generic_Overview_Lakehouse.png" alt="" style="object-fit: scale-down">


</split>





<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

<div class="block">

</div>



</div>
<div class="footnotes" role="doc-endnotes">
<ol>
<li id="fn:1" role="doc-endnote" class="footnote"><p>

Dipankar Mazumdar, Jason Hughes, and JB Onofre. 2023. The Data Lakehouse: Data Warehousing and More. Retrieved from https://arxiv.org/abs/2310.08697

</p></li></ol>
</div>
</div>

<aside class="notes"><p>Separation of Storage &amp; Compute!</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

#####  Lakehouse components

<split even>

<img src="Lakehouse/Workshops/attachments/Generic_Overview_Lakehouse.png" alt="" style="object-fit: scale-down">


- **Compute Engine**: Apache Spark, Flink, Trino, DuckDB etc.

- **File Format**: Apache Parquet

- **Storage**: HDFS, S3 etc


- **Storage Engine** + **Catalog** + **Table Format** = 
  
  <i class="fas fa-question fa-4x" ></i>



</split>


<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >


</div>
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

#####  Lakehouse components

<split even>

<img src="Lakehouse/Workshops/attachments/Generic_Overview_Lakehouse.png" alt="" style="object-fit: scale-down">


- **Compute Engine**: Apache Spark, Flink, Trino, DuckDB etc.

- **File Format**: Apache Parquet

- **Storage**: HDFS, S3 etc


- **Storage Engine** + **Catalog** + **Table Format** =  
  <br>
  
	ðŸŽ‰ **Open Table Formats** ðŸŽ‰


</split>




<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >


</div>
</div></script></section></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

##### Open Table Format - Apache Iceberg

  <img src="Lakehouse/Workshops/attachments/Pasted image 20251110155148.png" alt="" style="width: 400px; object-fit: fill">

<split even>

<img src="Lakehouse/Workshops/attachments/iceberg-metadata.png" alt="" style="width: 600px; object-fit: fill">


- ACID transactions
- Time Travel
- Hidden Partitioning
- Schema Evolution


</split>




<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >


</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

## Apache Iceberg Demo

https://github.com/wobu/lakehouse-workshop



<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >


</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 1080px; width: 1400px; min-height: 1080px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

## Q&A

<style>
.footnote{
  font-size:50%;
}
.callout {
font-size:70%;
}
.callout-title {
padding: 0px 1em 0px 10px /* 10px 1em 10px 10px */
}
/*.callout-title-inner p {
line-height: 1
}*/
</style>

<div class="" style="position: absolute; left: 0%; top: 94%; height: 6%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center" >


</div>
</div></script></section></div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/obsidian-markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>

    <script src="plugin/zoom/zoom.js"></script>
    <script src="plugin/math/math.js"></script>
    <script src="plugin/mermaid/mermaid.js"></script>
    <script src="plugin/chart/chart.umd.js"></script>
    <script src="plugin/chart/plugin.js"></script>
    <script src="plugin/menu/menu.js"></script>
    <script src="plugin/customcontrols/plugin.js"></script>
    <script src="plugin/chalkboard/plugin.js"></script>
    <script src="plugin/reveal-pointer/pointer.js"></script>

    <script>
        function extend() {
            const target = {};
            for (let i = 0; i < arguments.length; i++) {
                const source = arguments[i];
                for (const key in source) {
                    if (source.hasOwnProperty(key)) {
                        target[key] = source[key];
                    }
                }
            }
            return target;
        }

        function isLight(color) {
            let hex = color.replace('#', '');

            // convert #fff => #ffffff
            if (hex.length == 3) {
                hex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;
            }

            const c_r = parseInt(hex.substr(0, 2), 16);
            const c_g = parseInt(hex.substr(2, 2), 16);
            const c_b = parseInt(hex.substr(4, 2), 16);
            const brightness = ((c_r * 299) + (c_g * 587) + (c_b * 114)) / 1000;
            return brightness > 155;
        }

        const bgColor = getComputedStyle(document.documentElement).getPropertyValue('--r-background-color').trim();

        if (isLight(bgColor)) {
            document.body.classList.add('has-light-background');
        } else {
            document.body.classList.add('has-dark-background');
        }

        // default options to init reveal.js
        const defaultOptions = {
            controls: true,
            progress: true,
            history: true,
            center: true,
            transition: 'default', // none/fade/slide/convex/concave/zoom
            plugins: [
                ObsidianMarkdown,
                RevealHighlight,
                RevealZoom,
                RevealNotes,
                RevealMath.MathJax3,
                RevealMermaid,
                RevealChart,
                RevealCustomControls,
                RevealMenu,
                RevealPointer,
                RevealChalkboard,
            ],
            allottedTime: 120 * 1000,
            mathjax3: {
                mathjax: 'plugin/math/mathjax/tex-chtml.js',
            },
            markdown: {
                gfm: true,
            },
            mermaid: {
                theme: isLight(bgColor) ? 'default' : 'dark',
            },
            customcontrols: {
                controls: [
                    {
                        id: 'toggle-overview',
                        title: 'Toggle overview (O)',
                        icon: '<i class="fa fa-th"></i>',
                        action: 'Reveal.toggleOverview();'
                    },
                    {
                        icon: '<i class="fa fa-pen-square"></i>',
                        title: 'Toggle chalkboard (B)',
                        action: 'RevealChalkboard.toggleChalkboard();'
                    },
                    {
                        icon: '<i class="fa fa-pen"></i>',
                        title: 'Toggle notes canvas (C)',
                        action: 'RevealChalkboard.toggleNotesCanvas();'
                    },
                ]
            },
            menu: {
                loadIcons: false
            }
        };

        if ( pageInIframe() ) {
            defaultOptions.scrollActivationWidth = 5;
        }

        // options from URL query string
        const queryOptions = Reveal().getQueryHash() || {};

        const options = extend(defaultOptions, {"controls":true,"progress":true,"slideNumber":false,"center":true,"transition":"slide","transitionSpeed":"default","width":1400,"height":1080,"margin":0.04,"maxScale":2,"controlsLayout":"edges","mermaid":{"gitGraph":{"mainBranchName":"BI"},"theme":"base"}}, queryOptions);
    </script>

    <script>
      Reveal.initialize(options);
    </script>
    <!-- created with Slides Extended reveal.html template -->
</body>
</html>
